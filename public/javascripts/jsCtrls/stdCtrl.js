angular.module('serverApp')
    .controller('stdCtrl',function($scope,$rootScope,$http,$location){
        $scope.thisStdData=$rootScope.thisStdData;
        $scope.commentOnTask=function(indx,com){
            if(!com){
                alert('Please Write Something!');
            }
            else{
                $scope.thisStdData.tasks[indx].comments.push({data:com,commentor:$scope.thisStdData.name});
                $http.post('users/taskComFromStd',$scope.comObj).success(function(datac){
                    console.log(datac)
                })
                    .error(function(data){
                        alert(data);
                        console.log(data);
                    })
            }
        };
        $scope.changeStatus=function(idx){
            if($scope.thisStdData.tasks[idx].status=='Completed'){
                $scope.thisStdData.tasks[idx].status='InComplete';
                $http.post('users/changeStatus',$scope.thisStdData).success(function(datac){
                alert(datac);
            })
                .error(function(data){
                    alert(data);
                    console.log(data);
                })
        }
            else{
                $scope.thisStdData.tasks[idx].status='Completed';
                $http.post('users/changeStatus',$scope.thisStdData).success(function(datac){
                    alert(datac);
                })
                    .error(function(data){
                        alert(data);
                        console.log(data);
                    })
            }
        };
        $scope.logout=function(){
            $location.path('/')
        };
    });